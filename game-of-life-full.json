{"version":3,"kind":"Notebook","sha256":"3b2aa2bbb4e9defd162a3b9fa7696f7f8698dea4b0040b71e2553b0a2f74c6d7","slug":"game-of-life-full","location":"/python_basics/examples/game_of_life_full.ipynb","dependencies":[],"frontmatter":{"title":"Game of Life and other cellular automatons","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Ludovic Charleux","given":"Ludovic","family":"Charleux"},"name":"Ludovic Charleux","id":"contributors-game_of_life_full-generated-uid-0"}],"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"github":"https://github.com/symmeHub/positron","numbering":{"title":{"offset":2}},"source_url":"https://github.com/symmeHub/positron/blob/main/book/python_basics/examples/game_of_life_full.ipynb","edit_url":"https://github.com/symmeHub/positron/edit/main/book/python_basics/examples/game_of_life_full.ipynb","exports":[{"format":"ipynb","filename":"game_of_life_full.ipynb","url":"/armageddon/build/game_of_life_full-c7cca29801fd1ef23e7a5b9dfab292b8.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{"slideshow":{"slide_type":"-"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# UNCOMMENT FOR INTERACTIVE PLOTTING\n# %matplotlib notebook\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom matplotlib import animation, rc, cm\nimport IPython, io, urllib\nimport requests\nimport warnings\n\nwarnings.filterwarnings(\"ignore\")\n\nrc(\"animation\", html=\"html5\")","key":"C4nCoIugh4"},{"type":"outputs","id":"qpny6nXhIOaN9f--poFma","children":[],"key":"urry38GgZs"}],"key":"XeWYj3jzV1"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Introduction","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Xyic6g1pmJ"}],"identifier":"introduction","label":"Introduction","html_id":"introduction","implicit":true,"key":"EJGb84VVJy"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This notebook was inspired by the great video proposed by David Louapre available on his Youtube channel ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CqSk8IuyOs"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"“Science Etonnante”","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rVN9SELsLZ"}],"key":"aMsxUBjdki"},{"type":"text","value":":","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"K74kAFcBgk"}],"key":"QphzxKwztA"}],"key":"btiYeTlfHe"},{"type":"block","kind":"notebook-code","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"code","lang":"python","executable":true,"value":"IPython.display.YouTubeVideo(\"S-W0NX97DB0\")","key":"h69kwy6NWT"},{"type":"outputs","id":"Idyo6W6WMs5QMx2nIFdTY","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/plain":{"content":"<IPython.lib.display.YouTubeVideo at 0x77d101495f70>","content_type":"text/plain"},"text/html":{"content":"\n        <iframe\n            width=\"400\"\n            height=\"300\"\n            src=\"https://www.youtube.com/embed/S-W0NX97DB0\"\n            frameborder=\"0\"\n            allowfullscreen\n            \n        ></iframe>\n        ","content_type":"text/html"},"image/jpeg":{"content_type":"image/jpeg","hash":"3f34e6ba243139913ddd3c5e0add866b","path":"/armageddon/build/3f34e6ba243139913ddd3c5e0add866b.jpeg"}}},"key":"j9nBiygaBa"}],"key":"TxFKEf02fN"}],"key":"e5XDR3enAC"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JcIIdbjDeA"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Game of Life (GoL)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gyhvmIdB1b"}],"key":"wEPGYnF7Fu"},{"type":"text","value":" is a good way to learn about the use of object oriented programming, numpy and matplotlib. It is also a very interresting scientific and mathematical problem. The GoL belongs to the wider group of problems called ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mVM2ALP7fR"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Cellular Automatons","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LbwGDzusdy"}],"key":"PPTYnkP0hn"},{"type":"text","value":". A lot of alternative sets of interresting rules have been created/discovered over time since the invention of the GoL. In this tutorial, we introduce a simple class that can solve all those problems called ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MRNQIgGbDv"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Life Like Cellular Automatons (LLCA)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"w2Dm6MdDzr"}],"key":"r4EYb7ji1Z"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QP3fdCSajN"}],"key":"OilWU89O2Z"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Further readings:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qAJnbHTJ3t"}],"key":"NIs8e9LM3E"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://en.wikipedia.org/wiki/Life-like_cellular_automaton","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Life-like cellular automaton","key":"JFPxeKLVuL"}],"urlSource":"https://en.wikipedia.org/wiki/Life-like_cellular_automaton","data":{"page":"Life-like_cellular_automaton","wiki":"https://en.wikipedia.org/","lang":"en"},"internal":false,"protocol":"wiki","key":"kmHHADlfqP"}],"key":"OCwYMuwHBr"}],"key":"z736P6txtI"}],"key":"dZAdtTYW4e"}],"key":"kNdQPiw3qH"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A generic class to simulate LLCAs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jeXu7JEsMg"}],"identifier":"a-generic-class-to-simulate-llcas","label":"A generic class to simulate LLCAs","html_id":"a-generic-class-to-simulate-llcas","implicit":true,"key":"KUDY0K4u8e"}],"key":"zwZq8PU4d2"},{"type":"block","kind":"notebook-code","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"code","lang":"python","executable":true,"value":"class LLCA:\n    \"\"\"\n    A Life Like Cellular Automaton (LLCA)\n\n    Inputs:\n    * C: a binary matrix representing the cells where 1 stands for alive and 0 for dead.\n    * rule: the rule of the in the format 'BXSY' where X and Y are the birth and survival conditions.\n            Example: GOL rule is \"B3S23\".\n    \"\"\"\n\n    def __init__(self, C=np.random.rand(50, 50), rule=\"B3S23\"):\n        self.C = np.array(C).astype(bool)\n        self.rule = rule\n\n    def parse_rule(self):\n        \"\"\"\n        Parses the rule string\n        \"\"\"\n        r = self.rule.upper().split(\"S\")\n        B = np.array([int(i) for i in r[0][1:]]).astype(np.int64)\n        S = np.array([int(i) for i in r[1]]).astype(np.int64)\n        return B, S\n\n    def neighbors(self):\n        \"\"\"\n        Returns the number of living neigbors of each cell.\n        \"\"\"\n        C = self.C\n        N = np.zeros(C.shape, dtype=np.int8)  # Neighbors matrix\n        N[:-1, :] += C[1:, :]  # Living cells south\n        N[:, :-1] += C[:, 1:]  # Living cells east\n        N[1:, :] += C[:-1, :]  # Living cells north\n        N[:, 1:] += C[:, :-1]  # Living cells west\n        N[:-1, :-1] += C[1:, 1:]  # Living cells south east\n        N[1:, :-1] += C[:-1, 1:]  # Living cells north east\n        N[1:, 1:] += C[:-1, :-1]  # Living cells north west\n        N[:-1, 1:] += C[1:, :-1]  # Living cells south west\n        return N\n\n    def iterate(self):\n        \"\"\"\n        Iterates one time.\n        \"\"\"\n        B, S = self.parse_rule()\n        N = self.neighbors()\n        C = self.C\n        C1 = np.zeros(C.shape, dtype=np.int8)\n        for b in B:\n            C1 += (C == False) & (N == b)\n        for s in S:\n            C1 += C & (N == s)\n        self.C[:] = C1 > 0","key":"qQx5FBPFDp"},{"type":"outputs","id":"sPC8nhSLIBr15RRnuz-yQ","children":[],"key":"CCGucr1sxx"}],"key":"at3g6EVoPa"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The orginal Game of Life  (rule B3S23)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ei45tt8fti"}],"identifier":"the-orginal-game-of-life-rule-b3s23","label":"The orginal Game of Life  (rule B3S23)","html_id":"the-orginal-game-of-life-rule-b3s23","implicit":true,"key":"TXjEWQfXcd"}],"key":"EiuvMaj0Hu"},{"type":"block","kind":"notebook-code","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# INITIAL CONFIGURATION\nN = 100\nt = np.linspace(0.0, 1.0, N + 1)\nX, Y = np.meshgrid(t, t)\nf = 4\nC0 = np.sin(2.0 * np.pi * f * X) * np.sin(2.0 * np.pi * 2 * f * Y) > -0.1\ng = LLCA(C0, rule=\"B3S23\")\n\n\n# ANIMATION\ndef updatefig(*args):\n    g.iterate()\n    im.set_array(g.C)\n    return (im,)\n\n\nfig, ax = plt.subplots(figsize=(8, 6))\nax.axis(\"off\")\nim = plt.imshow(g.C, interpolation=\"nearest\", cmap=cm.binary, animated=True)\nanim = animation.FuncAnimation(fig, updatefig, frames=200, interval=50, blit=True)\n\nplt.close()\nanim\n# plt.show()","key":"cvo4BAHPq8"},{"type":"outputs","id":"zUVUPY2KuQHIdnBA7Kgob","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"<matplotlib.animation.FuncAnimation at 0x77d0a42972c0>","content_type":"text/plain"},"text/html":{"content_type":"text/html","hash":"9de9bf7d23241e541afd9363ab012764","path":"/armageddon/build/9de9bf7d23241e541afd9363ab012764.html"}}},"key":"bMu4zuEWKO"}],"key":"B6px4JeoVs"}],"key":"SJnKNUgD3d"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Alternative rule:  Day and Night (B3678S34678)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bUwpOgUjt3"}],"identifier":"alternative-rule-day-and-night-b3678s34678","label":"Alternative rule:  Day and Night (B3678S34678)","html_id":"alternative-rule-day-and-night-b3678s34678","implicit":true,"key":"Ve1zIE8748"}],"key":"VEQWMrt8eK"},{"type":"block","kind":"notebook-code","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"code","lang":"python","executable":true,"value":"N = 100\nt = np.linspace(0.0, 1.0, N + 1)\nX, Y = np.meshgrid(t, t)\nf = 10\nC0 = np.sin(2.0 * np.pi * f * X) * np.sin(2.0 * np.pi * 2 * f * Y) > 0.0\n\ng = LLCA(C0, rule=\"B3678S34678\")\n\n\ndef updatefig(*args):\n    g.iterate()\n    im.set_array(g.C)\n    return (im,)\n\n\nfig, ax = plt.subplots(figsize=(8, 6))\nax.axis(\"off\")\nim = plt.imshow(g.C, interpolation=\"nearest\", cmap=cm.binary, animated=True)\nanim = animation.FuncAnimation(fig, updatefig, frames=200, interval=50, blit=True)\nplt.close()\nanim\n# plt.show()","key":"gM4UH02bf9"},{"type":"outputs","id":"ggimmkdF-vaLU1hoQgDoO","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"text/plain":{"content":"<matplotlib.animation.FuncAnimation at 0x77d09fc98aa0>","content_type":"text/plain"},"text/html":{"content_type":"text/html","hash":"51197bd5f1a6a8967203b78ac76a7048","path":"/armageddon/build/51197bd5f1a6a8967203b78ac76a7048.html"}}},"key":"JZTvl5F0sM"}],"key":"eQSsmEQuZ7"}],"key":"PTRiXkw8HO"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Alternative rule: fractal-like B1S123","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Cesy6HyiLv"}],"identifier":"alternative-rule-fractal-like-b1s123","label":"Alternative rule: fractal-like B1S123","html_id":"alternative-rule-fractal-like-b1s123","implicit":true,"key":"EAGSYvHnZu"}],"key":"hwKyzLbdkN"},{"type":"block","kind":"notebook-code","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"code","lang":"python","executable":true,"value":"N = 200\nC0 = np.zeros((N, N))\nC0[1, 1] = 1\n\ng = LLCA(C0, rule=\"B1S123\")\n\n\ndef updatefig(*args):\n    g.iterate()\n    im.set_array(g.C)\n    return (im,)\n\n\nfig, ax = plt.subplots(figsize=(8, 6))\nax.axis(\"off\")\nim = plt.imshow(g.C, interpolation=\"nearest\", cmap=cm.binary, animated=True)\nanim = animation.FuncAnimation(fig, updatefig, frames=200, interval=40, blit=True)\nplt.close()\nanim\n# plt.show()","key":"hrc0SR91e9"},{"type":"outputs","id":"mBk0AL43M_b1lEZ0MuoI4","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"<matplotlib.animation.FuncAnimation at 0x77d09fc93ec0>","content_type":"text/plain"},"text/html":{"content_type":"text/html","hash":"52f028bdcf6f4f64bb54b9ea8d7e7597","path":"/armageddon/build/52f028bdcf6f4f64bb54b9ea8d7e7597.html"}}},"key":"RdBSD9Zvj5"}],"key":"bCek5TkmfS"}],"key":"GwdAmvZKb3"},{"type":"block","kind":"notebook-content","data":{"slideshow":{"slide_type":"slide"}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Existing structures in GoL","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yHfs4vFL85"}],"identifier":"existing-structures-in-gol","label":"Existing structures in GoL","html_id":"existing-structures-in-gol","implicit":true,"key":"WG0nGNwEyh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Over time, many structures have been discovered in GoL.\nFor example, some of them are translating leaving debris in their wake.\nThey are called puffers.\nHere is an example:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ze80zlZ7jn"}],"key":"AmXMW0Acwy"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://conwaylife.com/wiki/Hivenudger_2","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"https://​conwaylife​.com​/wiki​/Hivenudger_2","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"TF3DTmxY14"}],"urlSource":"https://conwaylife.com/wiki/Hivenudger_2","key":"YMunuIbzDz"}],"key":"QnRAMZ7ApV"}],"key":"mFOoCG8VlY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def get_gol_structure_by_url(url):\n    \"\"\"\n    Gets a GoL structure using plain text format on an url.\n    \"\"\"\n    content = requests.get(url, stream=True).content.decode()\n    out = []\n    for line in content.split(\"\\n\"):\n        line = line.strip()\n        # print(line)\n        if not line.startswith(\"!\"):\n            line_data = []\n            for c in line:\n                if c == \".\":\n                    line_data.append(0)\n                if c == \"O\":\n                    line_data.append(1)\n            out.append(line_data)\n    max_length = 0\n    for line in out:\n        if len(line) > max_length:\n            max_length = len(line)\n    for line in out:\n        if len(line) < max_length:\n            for i in range(max_length - len(line)):\n                line.append(0)\n    out = np.array(out)\n    return out\n\n\nurl = \"https://conwaylife.com/patterns/hivenudger2.cells\"\ninner_cells = get_gol_structure_by_url(url)\ninner_shape = inner_cells.shape\nhmargin = 5\nlmargin = 50\nrmargin = 5\ncells = np.zeros((inner_shape[0] + hmargin * 2, inner_shape[1] + lmargin + rmargin))\ncells[hmargin:-hmargin, lmargin:-rmargin] = inner_cells","key":"TwiJpG6REa"},{"type":"outputs","id":"cYD25ulMtVX_5_-KD3eO3","children":[],"key":"ICPgsqT6ex"}],"key":"iI0bXFeQoQ"},{"type":"block","kind":"notebook-code","data":{"slideshow":{"slide_type":"subslide"}},"children":[{"type":"code","lang":"python","executable":true,"value":"g = LLCA(\n    cells, rule=\"B3S23\"\n)  # B2S23 means Birth if 2 living neighbours and survival if 2 or 3 living neighbours\n\n\ndef updatefig(*args):\n    g.iterate()\n    im.set_array(g.C)\n    return (im,)\n\n\nfig, ax = plt.subplots(figsize=(8, 6))\nim = plt.imshow(g.C, interpolation=\"nearest\", cmap=cm.binary, animated=True)\nanim = animation.FuncAnimation(fig, updatefig, frames=200, interval=50, blit=True)\nax.axis(\"off\")\nplt.tight_layout()\nplt.close()\nanim","key":"snzsoVwExe"},{"type":"outputs","id":"XaVPzzKNbk2b7TFkSBQJ0","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"<matplotlib.animation.FuncAnimation at 0x77d09fc9b680>","content_type":"text/plain"},"text/html":{"content_type":"text/html","hash":"fd82a83811bc3a2e8ab54b9da86bc323","path":"/armageddon/build/fd82a83811bc3a2e8ab54b9da86bc323.html"}}},"key":"EN5lGY1kPG"}],"key":"vvoiVcmlKk"}],"key":"hxWxI2YqjV"}],"key":"Y8yPMr8Mdi"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Examples","url":"/examples","group":"Basics"},"next":{"title":"Exercises","url":"/exercises","group":"Basics"}}},"domain":"http://localhost:3002"}